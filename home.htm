<!DOCTYPE html>
<html><head><style>
.block{  overflow:hidden;   }
.trow {  display: table-row;  }
.alignL {  font-weight: bold;  }
.alignR {  margin: 1px 1px;  }
.alignL, .alignR {  display: table-cell;  }
.alignC1, .alignC2 {  display: table-cell;
                      padding-right: 20px;
                      padding-left: 20px;  }
</style></head>
<body>
<h1>Panchang Today</h1>
<h2>By Shankar JV</h2>
<script src="./panchang.js"></script>
<div class="trow">
<div class="alignL">Tithi: </div><div id="tithi" class="alignC1"></div></div>
<div class="trow">
<div class="alignL"></div><div id="s_tithi_start" class="alignC1"></div>
<div class="alignC2">to</div><div id="s_tithi_end" class="alignR"></div></div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL">Nakshatra: </div><div id="nakshtra" class="alignC1"></div></div>
<div class="trow">
<div class="alignL"></div><div id="s_nakshtra_start" class="alignC1"></div>
<div class="alignC2">to</div><div id="s_nakshtra_end" class="alignR"></div></div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL">Karana: </div><div id="karna" class="alignC1"></div></div>
<div class="trow">
<div class="alignL"></div><div id="s_karna_start" class="alignC1"></div>
<div class="alignC2">to</div><div id="s_karna_end" class="alignR"></div></div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL">Yoga: </div><div id="yoga" class="alignC1"></div></div>
<div class="trow">
<div class="alignL"></div><div id="s_yoga_start" class="alignC1"></div>
<div class="alignC2">to</div><div id="s_yoga_end" class="alignR"></div></div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL" >Day: </div><div id="day" class="alignC1"></div></div>
<script>
    var t= new Date();
    var dt=t.toLocaleString("en-IN");
    console.log("dt: "+dt);
    panchang.calculate(t, function() {
    document.getElementById("tithi").innerHTML=panchang.Tithi.name;
    document.getElementById("s_tithi_start").innerHTML=panchang.Tithi.start.toLocaleString("en-IN");
    document.getElementById("s_tithi_end").innerHTML=panchang.Tithi.end.toLocaleString("en-IN");
    document.getElementById("nakshtra").innerHTML=panchang.Nakshatra.name;
    document.getElementById("s_nakshtra_start").innerHTML=panchang.Nakshatra.start.toLocaleString("en-IN");
    document.getElementById("s_nakshtra_end").innerHTML=panchang.Nakshatra.end.toLocaleString("en-IN");
    document.getElementById("karna").innerHTML=panchang.Karna.name;
    document.getElementById("s_karna_start").innerHTML=panchang.Karna.start.toLocaleString("en-IN");
    document.getElementById("s_karna_end").innerHTML=panchang.Karna.end.toLocaleString("en-IN");
    document.getElementById("yoga").innerHTML=panchang.Yoga.name;
    document.getElementById("s_yoga_start").innerHTML=panchang.Yoga.start.toLocaleString("en-IN");
    document.getElementById("s_yoga_end").innerHTML=panchang.Yoga.end.toLocaleString("en-IN");
    document.getElementById("day").innerHTML=panchang.Day.name;    });
</script>
<script src="./sun.js"></script>
<div class="trow">
<div class="alignL"></div><div id="rise" class="alignC1"></div>
<div class="alignC2">to</div><div id="rise1" class="alignR"></div>
</div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL">Sun Rise & Set: </div><div id="riz" class="alignC1"></div>
<div class="alignC2"> & </div><div id="set" class="alignR"></div></div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL">RahuKalam: </div><div id="rkst" class="alignC1"></div>
<div class="alignC2">to</div><div id="rkft" class="alignR"></div></div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL">YamaGandam: </div><div id="ygst" class="alignC1"></div>
<div class="alignC2">to</div><div id="ygft" class="alignR"></div></div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL">GulikaKakam: </div><div id="gkst" class="alignC1"></div>
<div class="alignC2">to</div><div id="gkft" class="alignR"></div></div>
<div class="trow">
<div class="alignL">&nbsp</div></div>
<div class="trow">
<div class="alignL">DurMuhurtam: </div><div id="dmst" class="alignC1"></div>
<div class="alignC2">to</div><div id="dmft" class="alignR"></div></div>
<div class="trow">
<div class="alignL"></div><div id="dmbt" class="alignC1"></div>
<div class="alignC2">-</div><div id="dmet" class="alignR"></div></div>
<script>
navigator.geolocation.getCurrentPosition(function(position) {
   	var srise = new Date().sunrise(position.coords.latitude, position.coords.longitude);
   	var sset = new Date().sunset(position.coords.latitude, position.coords.longitude);
   	var srise1 = new Date(srise.getTime() + (24 * 60 * 60 * 1000)).sunrise(position.coords.latitude, position.coords.longitude);
    var daylen = Math.floor(sset - srise);
    var daypart = Math.floor(daylen / 8);
    var daypart0 = srise;
    var daypart1 = new Date(Math.floor((daypart0.getTime() + daypart)));
    var daypart2 = new Date(Math.floor((daypart1.getTime() + daypart)));
    var daypart3 = new Date(Math.floor((daypart2.getTime() + daypart)));
    var daypart4 = new Date(Math.floor((daypart3.getTime() + daypart)));
    var daypart5 = new Date(Math.floor((daypart4.getTime() + daypart)));
    var daypart6 = new Date(Math.floor((daypart5.getTime() + daypart)));
    var daypart7 = new Date(Math.floor((daypart6.getTime() + daypart)));
    var daypart8 = new Date(Math.floor((daypart7.getTime() + daypart)));
  var wday = new Date().getDay();
  switch(wday) {
  case 0:
    var rks = daypart7;
    var rkf = daypart8;
    var ygs = daypart4;
    var ygf = daypart5;
    var gks = daypart6;
    var gkf = daypart7;
    var dms = new Date(Math.floor(srise.getTime() + ((daylen * 10.4) / 12)));
    var dmf = new Date(Math.floor(dms.getTime() + (48 * 60 * 1000)));
    break;
  case 1:
    var rks = daypart1;
    var rkf = daypart2;
    var ygs = daypart3;
    var ygf = daypart4;
    var gks = daypart5;
    var gkf = daypart6;
    var dms = new Date(Math.floor(srise.getTime() + ((daylen * 6.4) / 12)));
    var dmf = new Date(Math.floor(dms.getTime() + (48 * 60 * 1000)));
    var dmb = new Date(Math.floor(srise.getTime() + ((daylen * 8.8) / 12)));
    var dme = new Date(Math.floor(dmb.getTime() + (48 * 60 * 1000)));
    break;
  case 2:
    var rks = daypart6;
    var rkf = daypart7;
    var ygs = daypart2;
    var ygf = daypart3;
    var gks = daypart4;
    var gkf = daypart5;
    var dms = new Date(Math.floor(srise.getTime() + ((daylen * 2.4) / 12)));
    var dmf = new Date(Math.floor(dms.getTime() + (48 * 60 * 1000)));
    var niglen = Math.floor(srise1 - sset);
    var dmb = new Date(Math.floor(sset.getTime() + ((niglen * 4.8) / 12)));
    var dme = new Date(Math.floor(dmb.getTime() + (48 * 60 * 1000)));
    break;
  case 3:
    var rks = daypart4;
    var rkf = daypart5;
    var ygs = daypart1;
    var ygf = daypart2;
    var gks = daypart3;
    var gkf = daypart4;
    var dms = new Date(Math.floor(srise.getTime() + ((daylen * 5.6) / 12)));
    var dmf = new Date(Math.floor(dms.getTime() + (48 * 60 * 1000)));
    break;
  case 4:
    var rks = daypart5;
    var rkf = daypart6;
    var ygs = daypart0;
    var ygf = daypart1;
    var gks = daypart2;
    var gkf = daypart3;
    var dms = new Date(Math.floor(srise.getTime() + ((daylen * 4) / 12)));
    var dmf = new Date(Math.floor(dms.getTime() + (48 * 60 * 1000)));
    var dmb = new Date(Math.floor(srise.getTime() + ((daylen * 8.8) / 12)));
    var dme = new Date(Math.floor(dmb.getTime() + (48 * 60 * 1000)));
    break;
  case 5:
    var rks = daypart3;
    var rkf = daypart4;
    var ygs = daypart6;
    var ygf = daypart7;
    var gks = daypart1;
    var gkf = daypart2;
    var dms = new Date(Math.floor(srise.getTime() + ((daylen * 2.4) / 12)));
    var dmf = new Date(Math.floor(dms.getTime() + (48 * 60 * 1000)));
    var dmb = new Date(Math.floor(srise.getTime() + ((daylen * 6.4) / 12)));
    var dme = new Date(Math.floor(dmb.getTime() + (48 * 60 * 1000)));
    break;
  case 6:
    var rks = daypart2;
    var rkf = daypart3;
    var ygs = daypart5;
    var ygf = daypart6;
    var gks = daypart0;
    var gkf = daypart1;
    var dms = new Date(Math.floor(srise.getTime() + ((daylen * 1.6) / 12)));
    var dmf = new Date(Math.floor(dms.getTime() + (48 * 60 * 1000)));
    break;  }
    document.getElementById("rise").innerHTML=srise.toLocaleString("en-IN");
    document.getElementById("rise1").innerHTML=srise1.toLocaleString("en-IN");
    document.getElementById("riz").innerHTML=srise.toLocaleString("en-IN");
    document.getElementById("set").innerHTML=sset.toLocaleString("en-IN");
    document.getElementById("rkst").innerHTML=rks.toLocaleString("en-IN");
    document.getElementById("rkft").innerHTML=rkf.toLocaleString("en-IN");
    document.getElementById("ygst").innerHTML=ygs.toLocaleString("en-IN");
    document.getElementById("ygft").innerHTML=ygf.toLocaleString("en-IN");
    document.getElementById("gkst").innerHTML=gks.toLocaleString("en-IN");
    document.getElementById("gkft").innerHTML=gkf.toLocaleString("en-IN");
    document.getElementById("dmst").innerHTML=dms.toLocaleString("en-IN");
    document.getElementById("dmft").innerHTML=dmf.toLocaleString("en-IN");
    document.getElementById("dmbt").innerHTML=dmb.toLocaleString("en-IN");
    document.getElementById("dmet").innerHTML=dme.toLocaleString("en-IN");  });
</script></body></html>

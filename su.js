Date.prototype.sunrise=function(t,e,a){return this.sunriseSet(t,e,!0,a)},Date.prototype.sunset=function(t,e,a){return this.sunriseSet(t,e,!1,a)},Date.prototype.sunriseSet=function(t,e,a,n){n=n||90.8333;var h=e/Date.DEGREES_PER_HOUR,o=this.getDayOfYear(),r=a?o+(6-h)/24:o+(18-h)/24,s=.9856*r-3.289,o=s+1.916*Math.sinDeg(s)+.02*Math.sinDeg(2*s)+282.634;o=Math.mod(o,360),h=.91764*Math.tanDeg(o),s=360/(2*Math.PI)*Math.atan(h),s=Math.mod(s,360),s+=90*Math.floor(o/90)-90*Math.floor(s/90),s/=Date.DEGREES_PER_HOUR,h=.39782*Math.sinDeg(o),o=Math.cosDeg(Math.asinDeg(h)),cosLocalHourAngle=(Math.cosDeg(n)-h*Math.sinDeg(t))/(o*Math.cosDeg(t)),t=Math.acosDeg(cosLocalHourAngle),a&&(t=360-t),r=t/Date.DEGREES_PER_HOUR+s-.06571*r-6.622-e/Date.DEGREES_PER_HOUR,r=Math.mod(r,24);e=new Date(0);e.setUTCFullYear(this.getUTCFullYear()),e.setUTCMonth(this.getUTCMonth()),e.setUTCDate(this.getUTCDate());r=e.getTime()+60*r*60*1e3;return new Date(r)},Date.DEGREES_PER_HOUR=15,Date.prototype.getDayOfYear=function(){var t=new Date(this.getFullYear(),0,1);return Math.ceil((this-t)/864e5)},Math.degToRad=function(t){return t*Math.PI/180},Math.radToDeg=function(t){return 180*t/Math.PI},Math.sinDeg=function(t){return Math.sin(2*t*Math.PI/360)},Math.acosDeg=function(t){return 360*Math.acos(t)/(2*Math.PI)},Math.asinDeg=function(t){return 360*Math.asin(t)/(2*Math.PI)},Math.tanDeg=function(t){return Math.tan(2*t*Math.PI/360)},Math.cosDeg=function(t){return Math.cos(2*t*Math.PI/360)},Math.mod=function(t,e){t%=e;return t<0&&(t+=e),t};
